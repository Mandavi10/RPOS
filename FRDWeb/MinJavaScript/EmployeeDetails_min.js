var id = ""; function mobilecheck() { var e = document.getElementById("txtremobile").value; return !!/^\d{10}$/.test(e) || (jquery_min_p("#txtremobile").attr("placeholder", "Mobile Number"), jquery_min_p("#txtremobile").val(""), jquery_min_p("#txtremobile").attr("placeholder", "Invalid number!!"), jquery_min_p("#txtremobile").addClass("validate"), !1) } function BindEmployeeDetails() { var restroId = id; jquery_min_p("#firstdiv").html(""), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/Master/RestaurantsEmployeeDetails", data: "{'restroId':'" + restroId + "'}", dataType: "json", async: !1, success: function (result) { for (var i = 0, jsonData = eval(result), arraycount = result.length, Query = "", i = 0; i < arraycount; i++) Query += "<div class='col-4 col-md-4' data-toggle='modal' data-target='#icard' id='firstdiv1'>", Query += " <div class='panel-group'>", Query += " <div class='panel panel-default'>", Query += " <div class='panel-heading'>", Query += "<h4 class='panel-title'>", Query = Query + " <a data-toggle='collapse'><i class='fa fa-angle-double-right' aria-hidden='true'></i> Employee Code :" + result[i].EmpCode + "</a></h4> </div>", Query += " <div id='employee1' class='panel-collapse collapse show'>", Query = Query + "<div class='panel-body'onclick='Check(" + result[i].EmpID + ");'>", Query += "<div class='row'>", Query += "<div class='col-md-8'>", Query += "<div class='row'>", Query += "<label class='col-md-5 fontBold'>Employee Code:</label>", Query = Query + "<label class='col-md-7 p-0' >" + result[i].EmpCode + "</label></div>", Query += "<div class='row'>", Query += "<label class='col-md-5 fontBold'>Name:</label>", Query = Query + "<label class='col-md-7 p-0'>" + result[i].EmpName + "</label></div>", Query += "<div class='row'>", Query += " <label class='col-md-5 fontBold'>Mobile:</label>", Query = Query + "<label class='col-md-7 p-0'>" + result[i].mobileNo + "</label></div>", Query += "<div class='row'>", Query += "<label class='col-md-5 fontBold'>Email:</label>", Query = Query + "<label class='col-md-7 p-0'>" + result[i].EmailId + "</label></div>", Query += "<div class='row'>", Query += "<label class='col-md-5 fontBold'>kitchensectionname:</label>", Query = Query + " <label class='col-md-7 p-0'>" + result[i].kitchensectionname + "</label> </div>", Query += "<div class='row'>", Query += "<label class='col-md-5 fontBold'>Restroname:</label>", Query = Query + " <label class='col-md-7 p-0'>" + result[i].Restroname + "</label> </div>", Query += "<div class='row'>", Query += "<label class='col-md-5 fontBold'>UserPin:</label>", Query = Query + " <label class='col-md-7 p-0'>" + result[i].UserPin + "</label> </div>", Query += "<div class='row'>", Query += "<label class='col-md-5 fontBold'>Role:</label>", Query = Query + " <label class='col-md-7 p-0'>" + result[i].RoleName + "</label> </div>", Query += "<div class='col-md-4'></div></div>", Query += " <div class='col-md-4 pl-0'>", Query += "<div class='empProfile'>", Query = Query + "<img src='" + jsonData[i].Base64Image + "'/>", Query += " </div>", Query += " </div>", Query += "    </div>", Query += "    </div>", Query += "     </div>", Query += "  </div>", Query += " </div>", Query += "</div>"; jquery_min_p("#firstdiv").append(Query), jquery_min_p("#searchemplist").css("display", "none"), jquery_min_p("#searchempgrid").css("display", "block") }, error: function () { } }) } function BindEmployeeList() { var restroId = id, wh = jquery_min_p(document).height(), gh = wh - 190, dataCompany = []; jquery_min_p("#tblemplist").html(""), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/Master/RestaurantsEmployeeDetails", data: "{'restroId':'" + restroId + "'}", dataType: "json", async: !1, success: function (result) { console.log(result); var i = 0, jsonData = eval(result), arraycount = result.length, Query = ""; Query += "<thead>", Query += "<tr>", Query += " <th width='10%'>S.No.</th>", Query += "<th width='15%'>Code</th>", Query += "<th width='20%'>Name</th>", Query += "<th width='20%'>Mobile</th>", Query += "<th width='20%'>Email</th>", Query += "<th width='15%'>Type</th>", Query += "<th width='15%'>Action</th>", Query += "</tr>", Query += "</thead>", Query += "<tbody id='tbllist'>"; for (var i = 0; i < arraycount; i++) Query += "", Query += "", Query += "<tr data-toggle='modal' data-target='#icard' id='tbllist'>", Query = Query + "  <td width='10%' onclick='CheckList(" + result[i].EmpID + ");'>" + result[i].RowNumber + "</td>", Query = Query + "  <td onclick='CheckList(" + result[i].EmpID + ");'>" + result[i].EmpCode + "</td>", Query = Query + "  <td onclick='CheckList(" + result[i].EmpID + ");'>" + result[i].EmpName + "</td>", Query = Query + " <td onclick='CheckList(" + result[i].EmpID + ");'>" + result[i].mobileNo + "</td>", Query = Query + " <td onclick='CheckList(" + result[i].EmpID + ");'>" + result[i].EmailId + "</td>", Query = Query + "<td onclick='CheckList(" + result[i].EmpID + ");'>" + result[i].RoleName + "</td>", Query = Query + "<td onclick='RestaurantsshowList(" + result[i].EmpID + ");' ><i class='fa fa-pencil-square-o' aria-hidden='true'></i></td>", Query += "</tr>"; Query += "</tbody>", jquery_min_p("#tblemplist").append(Query), jquery_min_p("#seconddiv").css("display", "block"), jquery_min_p("#firstdiv").css("display", "none"), jquery_min_p("#searchemplist").css("display", "block"), jquery_min_p("#searchempgrid").css("display", "none") }, error: function () { } }) } function Check(empid) { jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/Master/EmployeeMasterIDDetails", data: "{'EmpId':'" + empid + "'}", dataType: "json", async: !1, success: function (result) { var i = 0, jsondata = eval(result); jquery_min_p("#lblcode").text(jsondata[0].EmpCode), jquery_min_p("#lblname").text(jsondata[0].EmpName), jquery_min_p("#lblmobile").text(jsondata[0].mobileNo), jquery_min_p("#lblemail").text(jsondata[0].EmailId), jquery_min_p("#lblroledisplay").text(jsondata[0].RoleName), jquery_min_p("#lblkitchen").text(jsondata[0].kitchensectionname), jquery_min_p("#lblrest").text(jsondata[0].RestroName), jquery_min_p("#lblcode").css("display", "block"), jquery_min_p("#lblname").css("display", "block"), jquery_min_p("#lblmobile").css("display", "block"), jquery_min_p("#lblemail").css("display", "block"), jquery_min_p("#lblrest").css("display", "block"), jquery_min_p("#lblroledisplay").css("display", "block"), jquery_min_p("#lblkitchen").css("display", "block"), jquery_min_p("#txtrecode").css("display", "none"), jquery_min_p("#txtrename").css("display", "none"), jquery_min_p("#txtremobile").css("display", "none"), jquery_min_p("#txtreemail").css("display", "none"), jquery_min_p("#ddlreselectroledisplay").css("display", "none"), jquery_min_p("#ddlrekitchen").css("display", "none"), jquery_min_p("#ddlrerest").css("display", "none"), jquery_min_p("#txtRole").css("display", "none"), jquery_min_p("#btnresaveemp").css("display", "none") }, error: function (e) { jquery_min_p("#h6warning").text("There is a Problem, Try Again!"), jquery_min_p("#dngwarn").modal("show") } }) } function CheckList(empid) { jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/Master/EmployeeMasterIDDetails", data: "{'EmpId':'" + empid + "'}", dataType: "json", async: !1, success: function (result) { var i = 0, jsondata = eval(result); jquery_min_p("#lblcode").text(jsondata[0].EmpCode), jquery_min_p("#lblname").text(jsondata[0].EmpName), jquery_min_p("#lblmobile").text(jsondata[0].mobileNo), jquery_min_p("#lblemail").text(jsondata[0].EmailId), jquery_min_p("#lblroledisplay").text(jsondata[0].RoleName), jquery_min_p("#lblkitchen").text(jsondata[0].kitchensectionname), jquery_min_p("#lblrest").text(jsondata[0].RestroName), jquery_min_p("#lblcode").css("display", "block"), jquery_min_p("#lblname").css("display", "block"), jquery_min_p("#lblmobile").css("display", "block"), jquery_min_p("#lblemail").css("display", "block"), jquery_min_p("#lblrest").css("display", "block"), jquery_min_p("#lblroledisplay").css("display", "block"), jquery_min_p("#lblkitchen").css("display", "block"), jquery_min_p("#txtrecode").css("display", "none"), jquery_min_p("#txtrename").css("display", "none"), jquery_min_p("#txtremobile").css("display", "none"), jquery_min_p("#txtreemail").css("display", "none"), jquery_min_p("#ddlreselectroledisplay").css("display", "none"), jquery_min_p("#ddlrekitchen").css("display", "none"), jquery_min_p("#ddlrerest").css("display", "none"), jquery_min_p("#txtRole").css("display", "none"), jquery_min_p("#btnresaveemp").css("display", "none") }, error: function (e) { jquery_min_p("#h6warning").text("There is a Problem, Try Again!"), jquery_min_p("#dngwarn").modal("show") } }) } function RestaurantsshowList(EmpID) { jquery_min_p("#lblempid").val(EmpID), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/Master/EmployeeMasterIDDetails", data: "{'EmpID':'" + EmpID + "'}", dataType: "json", async: !1, success: function (result) { var i = 0, jsondata = eval(result); RestroDropdown(); var empcode = jsondata[0].EmpCode, empname = jsondata[0].EmpName, mobileno = jsondata[0].mobileNo, emailid = jsondata[0].EmailId, roleid = jsondata[0].RoleId, restroid = jsondata[0].restroId, kitchensectionId = jsondata[0].kitchensectionId; jquery_min_p("#txtrecode").val(empcode), jquery_min_p("#txtrecode").attr("disabled", "disabled"), jquery_min_p("#txtrename").val(empname), jquery_min_p("#txtremobile").val(mobileno), jquery_min_p("#txtreemail").val(emailid), jquery_min_p("#ddlreselectroledisplay").val(roleid), jquery_min_p(".selectpicker").selectpicker("refresh"), jquery_min_p("#ddlrerest").val(restroid), KitchenDropdown(), jquery_min_p("#ddlrekitchen").val(kitchensectionId), jquery_min_p("#txtRole").css("display", "block"), jquery_min_p("#txtrecode").css("display", "block"), jquery_min_p("#txtrename").css("display", "block"), jquery_min_p("#txtremobile").css("display", "block"), jquery_min_p("#txtreemail").css("display", "block"), jquery_min_p("#ddlreselectroledisplay").css("display", "block"), jquery_min_p("#ddlrekitchen").css("display", "block"), jquery_min_p("#ddlrerest").css("display", "block"), jquery_min_p("#btnresaveemp").css("display", "block "), jquery_min_p("#lblcode").css("display", "none"), jquery_min_p("#lblname").css("display", "none"), jquery_min_p("#lblmobile").css("display", "none"), jquery_min_p("#lblemail").css("display", "none"), jquery_min_p("#lblrest").css("display", "none"), jquery_min_p("#lblroledisplay").css("display", "none"), jquery_min_p("#lblkitchen").css("display", "none") }, error: function (e) { jquery_min_p("#h6warning").text("There is a Problem, Try Again!"), jquery_min_p("#dngwarn").modal("show") } }) } function RestaurantsUpdateList() { var RoleId = jquery_min_p("#ddlreselectroledisplay").val(), EmpId = jquery_min_p("#lblempid").val(), kitchensectionId = jquery_min_p("#ddlrekitchen option:selected").val(), EmailId = jquery_min_p("#txtreemail").val().replace("'", "\\'"), EmpName = jquery_min_p("#txtrename").val().replace("'", "\\'"), mobileNo = jquery_min_p("#txtremobile").val().replace("'", "\\'"), restroId = jquery_min_p("#ddlrerest option:selected").val(); jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/Master/RestaurantsUpdateList", data: "{'EmailId':'" + EmailId + "','EmpId':'" + EmpId + "','EmpName':'" + EmpName + "','mobileNo':'" + mobileNo + "','kitchensectionId':'" + kitchensectionId + "','restroId':'" + restroId + "','RoleId':'" + RoleId + "'}", dataType: "json", async: !1, success: function (result) { var i = 0, jsondata = eval(result); Reset(), jquery_min_p("#popupsuccess").text("Employee Updated Successfully"), jquery_min_p("#savePopup").modal("show"), BindEmployeeDetails(), BindEmployeeList() }, error: function (e) { jquery_min_p("#h6warning").text("There is a Problem, Try Again!"), jquery_min_p("#dngwarn").modal("show") } }) } function RestroDropdown() { jquery_min_p("#ddlrerest").html(""); var Query = Query + "<option selected='selecte'>Select</option>"; jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/Master/RestroDropdown", data: "{}", dataType: "json", async: !1, success: function (result) { var i = 0, jsondata = eval(result), newOption1 = newOption1 + "<option value='0' selected='Select'>Select</option>"; jquery_min_p("#ddlrerest").append(newOption1); for (var i = 0; i < result.length; i++) { var newOption = jquery_min_p("<option>"); newOption.attr("value", result[i].restroId).text(result[i].RestroName), jquery_min_p("#ddlrerest").append(newOption) } }, error: function (e) { jquery_min_p("#h6warning").text("There is a Problem, Try Again!"), jquery_min_p("#dngwarn").modal("show") } }) } function KitchenDropdown() { var restroId = jquery_min_p("#ddlrerest option:selected").val(), restron = jquery_min_p("#ddlrest").val(); jquery_min_p("#ddlrekitchen").html(""), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/Master/KitchenDropdown", data: "{'restroId':'" + restroId + "'}", dataType: "json", async: !1, success: function (result) { var i = 0, jsondata = eval(result), newOption1 = newOption1 + "<option value='0' selected='Select'>Select</option>"; jquery_min_p("#ddlrekitchen").append(newOption1); for (var i = 0; i < result.length; i++) { var newOption = jquery_min_p("<option>"); newOption.attr("value", result[i].kitchensectionId).text(result[i].kitchenSection), jquery_min_p("#ddlrekitchen").append(newOption) } }, error: function (e) { jquery_min_p("#h6warning").text("There is a Problem, Try Again!"), jquery_min_p("#dngwarn").modal("show") } }) } function RoleDropdown() { jquery_min_p("#ddlreselectroledisplay").html(""), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/Master/RoleDropdown", data: "{}", dataType: "json", async: !1, success: function (result) { var i = 0, jsondata = eval(result), newOption1 = newOption1 + "<option value='0' selected='Select'>Select</option>"; jquery_min_p("#ddlreselectroledisplay").append(newOption1), jquery_min_p(".selectpicker").selectpicker("refresh"); for (var i = 0; i < result.length; i++) { var newOption = jquery_min_p("<option>"); newOption.attr("value", result[i].RoleId).text(result[i].RoleName), jquery_min_p("#ddlreselectroledisplay").append(newOption), jquery_min_p(".selectpicker").selectpicker("refresh") } }, error: function (e) { jquery_min_p("#h6warning").text("There is a Problem, Try Again!"), jquery_min_p("#dngwarn").modal("show") } }) } function Reset() { jquery_min_p("#txtrename").val(""), jquery_min_p("#txtremobile").val(""), jquery_min_p("#txtreemail").val(""), jquery_min_p("#txtrename").removeClass("validate"), jquery_min_p("#txtremobile").removeClass("validate"), jquery_min_p("#txtreemail").removeClass("validate"), jquery_min_p("#ddlrerest").removeClass("validate"), jquery_min_p("#ddlreselectroledisplay").removeClass("validate"), jquery_min_p("#ddlrekitchen").removeClass("validate") } function RemoveClass() { "" != jquery_min_p("#txtrename").val() && jquery_min_p("#txtrename").removeClass("validate"), "" != jquery_min_p("#txtremobile").val() && jquery_min_p("#txtremobile").removeClass("validate"), "" != jquery_min_p("#txtreemail").val() && jquery_min_p("#txtreemail").removeClass("validate"), "0" != jquery_min_p("#ddlrerest").val() && jquery_min_p("#ddlrerest").removeClass("validate"), "" != jquery_min_p("#txtreemail").val() && jquery_min_p("#txtreemail").removeClass("validate"), "Nothing selected" != jquery_min_p("#ddlreselectroledisplay").val() && jquery_min_p("#ddlreselectroledisplay").removeClass("validate"), "0" != jquery_min_p("#ddlrekitchen").val() && jquery_min_p("#ddlrekitchen").removeClass("validate") } function Validation() { var e = 0; return "" == $.trim(jquery_min_p("#txtrename").val()) && (jquery_min_p("#txtrename").addClass("validate"), e = 1), "" == jquery_min_p("#txtremobile").val() && (jquery_min_p("#txtremobile").addClass("validate"), e = 1), "" == jquery_min_p("#txtreemail").val() && (jquery_min_p("#txtreemail").addClass("validate"), e = 1), "0" == jquery_min_p("#ddlrerest").val() && (jquery_min_p("#ddlrerest").addClass("validate"), e = 1), "Nothing selected" == jquery_min_p("#ddlreselectroledisplay").text() && (jquery_min_p(".selectpicker").on("hide.bs.select", function () { jquery_min_p(this).trigger("focusout") }), e = 1), "0" == jquery_min_p("#ddlrekitchen").val() && (jquery_min_p("#ddlrekitchen").addClass("validate"), e = 1), 1 != e } function CheckRole() { var e = 0; $("#ddlreselectroledisplay option:selected").each(function () { "Kitchen User" == $(this).text() && (e = 1) }), 1 == e ? jquery_min_p("#divrekitchen").css("display", "flex") : jquery_min_p("#divrekitchen").css("display", "none") } jquery_min_p(document).ready(function () { id = jquery_min_p("#lblrestroid").text(), BindEmployeeDetails(), RoleDropdown(), jquery_min_p("#btnsaveclose").click(function () { BindEmployeeList() }), jquery_min_p("#btnclose").click(function () { Reset() }), jquery_min_p("#btnresaveemp").click(function () { if (!Validation()) return !1; RestaurantsUpdateList() }), jquery_min_p("#txtemplistinput").on("keyup", function () { var e = jquery_min_p(this).val().toLowerCase(); jquery_min_p("#tbllist   tr").filter(function () { jquery_min_p(this).toggle($(this).text().toLowerCase().indexOf(e) > -1) }) }), jquery_min_p("#txtempgridinput").on("keyup", function () { val = jquery_min_p(this).val().toLowerCase(), jquery_min_p("#firstdiv1 ").each(function () { jquery_min_p(this).toggle(jquery_min_p(this).text().toLowerCase().includes(val)) }) }), jquery_min_p("#listview").click(function () { jquery_min_p("#seconddiv").css("display", "block"), jquery_min_p("#firstdiv").css("display", "none"), BindEmployeeList() }), jquery_min_p("#cardview").click(function () { jquery_min_p("#seconddiv").css("display", "none"), jquery_min_p("#firstdiv").css("display", "flex"), BindEmployeeDetails() }), jquery_min_p("#firstdiv").click(function () { jquery_min_p("#lblcode").css("display", "block"), jquery_min_p("#lblname").css("display", "block"), jquery_min_p("#lblmobile").css("display", "block"), jquery_min_p("#lblemail").css("display", "block"), jquery_min_p("#lblrest").css("display", "block"), jquery_min_p("#lblroledisplay").css("display", "block"), jquery_min_p("#lblkitchen").css("display", "block"), jquery_min_p("#txtrecode").css("display", "none"), jquery_min_p("#txtrename").css("display", "none"), jquery_min_p("#txtremobile").css("display", "none"), jquery_min_p("#txtreemail").css("display", "none"), jquery_min_p("#txtRole").css("display", "none"), jquery_min_p("#ddlrekitchen").css("display", "none"), jquery_min_p("#ddlrerest").css("display", "none"), jquery_min_p("#btnresaveemp").css("display", "none") }), jquery_min_p("#btnexit").click(function () { window.location.href = "/Home/Index" }), jquery_min_p("#txtrename").keypress(function (e) { var l = e.keyCode; l > 47 && l < 58 || l > 64 && l < 91 || l > 96 && l < 123 || e.preventDefault() }), jquery_min_p("#txtremobile").keypress(function (e) { var l = e.keyCode; (l >= 65 && l <= 90 || l >= 97 && l <= 122) && e.preventDefault() }), jquery_min_p("#txtreemail").change(function () { 1 == /^[a-zA-Z0-9._-]+@([a-zA-Z0-9.-]+\.)+[a-zA-Z0-9.-]{2,4}$/.test(document.getElementById("txtreemail").value) ? jquery_min_p("#txtreemail").removeClass("validate") : (jquery_min_p("#txtreemail").val(""), jquery_min_p("#txtreemail").attr("placeholder", "Invalid E-Mail!!"), jquery_min_p("#txtreemail").addClass("validate")) }), jquery_min_p("#txtremobile").keydown(function (e) { return k = e.which, k >= 96 && k <= 105 || 8 == k ? 10 == jquery_min_p(this).val().length ? 8 == k || (e.preventDefault(), !1) : void 0 : (e.preventDefault(), !1) }) });