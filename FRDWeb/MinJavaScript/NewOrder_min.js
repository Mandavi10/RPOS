var id = "", count = 0, str = "", OrderTypeId = 0, temporderid = 0; function BindSittingSection() { jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/SectionTable/BindSittingSection", data: "{'id':'" + id + "'}", dataType: "json", async: !1, success: function (e) { var i = 0, n = e.length, t = ""; for (i = 0; i < n; i++) t = t + "<div class='sectionBox' id='sectable_" + e[i].sittingsectionId + "'  onclick='BindTables(" + e[i].sittingsectionId + ")'>", t = (t += "<img src='/Content/images/family-icon-sm.png' />") + "<h6>" + e[i].name + "</h6></div>"; jquery_min_p("#divsittingsection").append(t), jquery_min_p("#preloader").css("display", "none"), jquery_min_p("#Overlay_Load").css("visibility", "hidden") }, beforesend: function () { jquery_min_p("#preloader").css("display", "block"), jquery_min_p("#Overlay_Load").css("visibility", "visible") }, error: function () { } }) } function BindTables(e) { jquery_min_p("#divoccvac").css("display", "block"), jquery_min_p("#divsittingsection .sectionBox").removeClass("active"); var i = "#sectable_" + e; jquery_min_p(i).hasClass("active") ? (jquery_min_p(i).removeClass("active"), jquery_min_p(i).addClass("active")) : jquery_min_p(i).addClass("active"), jquery_min_p("#destinationFields").html(""); var n = id; e = e; jquery_min_p("#lblsittingsectionid").text(e), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/NewOrder/BindSittingTables", data: "{'sittingsectionId':'" + e + "','Restroid':'" + n + "'}", dataType: "json", async: !1, success: function (e) { var i = 0, n = "", t = e.length; for (i = 0; i < t; i++) n = null != e[i].SeltableId ? n + "<div class='sectionBox tblOccupied' id='" + e[i].tableId + "' >" : n + "<div class='sectionBox tblVacant' id='" + e[i].tableId + "' onclick='SelectElement_Dest(" + e[i].tableId + ")'>", n = (n += "<img src='/Content/images/table-icon-sm.png' />") + "<h6>" + e[i].name + "</h6></div>"; jquery_min_p("#destinationFields").append(n), jquery_min_p("#destinationFields").css("display", "block") }, error: function () { } }) } function SelectElement_Dest(e) { jquery_min_p("#btnproceed").css("display", "inline-block"), tabid = "#" + e, jquery_min_p(tabid).removeClass("tblVacant"), jquery_min_p(tabid).removeClass("active"), jquery_min_p(tabid).addClass("active"), count = 0, jquery_min_p("#destinationFields .sectionBox").each(function () { $(this).hasClass("active") && (count += 1) }), count > 1 && (jquery_min_p("#hconfirm").text("Do you want merge " + count + " tables!!"), bootstrap_min_p("#confirmationPopup").modal("show")) } function SaveTables() { var e = jquery_min_p("#txtmembercount").val(), i = "<dtXml>", n = jquery_min_p("#lblsittingsectionid").text(), t = id; jquery_min_p("#destinationFields .sectionBox").each(function (e) { if (jquery_min_p(this).hasClass("active")) { i += "<dtXml "; var t = jquery_min_p(this)[0].id; i += 'tableId="' + t + '" ', i += 'sittingsectionId="' + n + '" ', i += " />" } }), i += "</dtXml>", jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/NewOrder/SaveOrderTable", data: "{'TableDataX':'" + i + "','restroId':'" + t + "','membercount':'" + e + "','OrderTypeId':'" + OrderTypeId + "'}", dataType: "json", async: !1, success: function (e) { e.length > 0 && (temporderid = e[0].temporderno, jquery_min_p("#popupsuccess").text("Table Added To This Section successfully"), jquery_min_p("#savePopup").modal("show")) } }) } jquery_min_p(document).ready(function () { id = jquery_min_p("#lblrestroid").text(), BindSittingSection(), jquery_min_p("#sdinein").click(function () { OrderTypeId = 1, jquery_min_p("#createNewItem").css("display", "none"), jquery_min_p("#dineInCon").css("display", "block"), jquery_min_p("#divsittingsection").css("display", "block") }), jquery_min_p("#txtmembercount").keypress(function (e) { var i = e.keyCode; (i >= 65 && i <= 90 || i >= 97 && i <= 122) && e.preventDefault() }), jquery_min_p("#stakeaway").click(function () { var e = 3; jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/NewOrder/BindOrderTypeId", data: "{'OrderTypeId':'" + e + "'}", dataType: "json", async: !1, success: function (i) { e = i, window.location.href = "/SalesBilling/TakeAway?OrderTypeId=" + e } }) }), jquery_min_p("#btnok").click(function () { bootstrap_min_p("#WarningPopup").modal("hide") }), jquery_min_p("#btnsaveorder").click(function () { $("#destinationFields .sectionBox").hasClass("active") ? "" == jquery_min_p("#txtmembercount").val() ? jquery_min_p("#txtmembercount").addClass("validate") : (SaveTables(), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/NewOrder/BindtempOrderId", data: "{'temporderid':'" + temporderid + "'}", dataType: "json", async: !1, success: function (e) { temporderid = e, window.location.href = "/SalesBilling/DineInTakeAway?OrderId=" + temporderid } })) : (jquery_min_p("#hwarning").text("Please Select Table First"), jquery_min_p("#WarningPopup").modal("show")) }), jquery_min_p("#yesBtn").click(function () { bootstrap_min_p("#confirmationPopup").modal("hide") }), jquery_min_p("#noBtn").click(function () { bootstrap_min_p("#confirmationPopup").modal("hide"), jquery_min_p("#destinationFields .sectionBox").each(function () { $(this).hasClass("active") && (jquery_min_p(this).removeClass("active"), jquery_min_p(this).addClass("tblVacant")) }) }) });