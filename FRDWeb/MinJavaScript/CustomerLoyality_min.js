var id = ""; function SaveCustomerLoyality() { restroid = id; var name = jquery_min_p("#txtclname").val(), cardno = jquery_min_p("#txtclcardno").val().replace("'", "\\'"), mobile = jquery_min_p("#txtclmobile").val(), email = jquery_min_p("#txtclemail").val(), address = jquery_min_p("#txtcladdress").val().replace("'", "\\'"); jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/CustomerLoyalty/SaveCustomerLoyality", data: "{'name':'" + name + "','cardno':'" + cardno + "','mobile':'" + mobile + "','email':'" + email + "','address':'" + address + "','restroid':'" + restroid + "'}", dataType: "json", async: !1, success: function (result) { var i = 0, jsondata = eval(result); "0" == result && (jquery_min_p("#popupsuccess").text("Card Issued Successfully"), jquery_min_p("#savePopup").modal("show")), Reset() }, error: function (e) { jquery_min_p("#hwarning").text("Their is problem,Try Again"), jquery_min_p("#WarningPopup").modal("show") } }) } function Checkname() { var name = jquery_min_p("#txtclname").val().replace("'", "\\'"); jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/CustomerLoyalty/Checkname", data: "{'name':'" + name + "'}", dataType: "json", async: !1, success: function (result) { var i = 0, jsondata = eval(result); "1" == jsondata[0].value && (jquery_min_p("#txtclname").val(""), jquery_min_p("#txtclname").attr("placeholder", "Name already exist."), jquery_min_p("#txtclname").addClass("validate")) }, error: function (e) { jquery_min_p("#hwarning").text("Their is problem,Try Again"), jquery_min_p("#WarningPopup").modal("show") } }) } function mobilecheck() { var e = document.getElementById("txtclmobile").value; return !!/^\d{10}$/.test(e) || (jquery_min_p("#txtclmobile").attr("placeholder", "Mobile Number"), jquery_min_p("#txtclmobile").val(""), jquery_min_p("#txtclmobile").attr("placeholder", "Invalid number!!"), jquery_min_p("#txtclmobile").addClass("validate"), !1) } function ReIssuemobilecheck() { var e = document.getElementById("txtissuemobno").value; return !!/^\d{10}$/.test(e) } function Validation() { var e = 0; return "" == $.trim(jquery_min_p("#txtclname").val()) && (jquery_min_p("#txtclname").addClass("validate"), e = 1), "" == $.trim(jquery_min_p("#txtclmobile").val()) && (jquery_min_p("#txtclmobile").addClass("validate"), e = 1), "" == jquery_min_p("#txtclcardno").val() && (jquery_min_p("#txtclcardno").addClass("validate"), e = 1), "" == $.trim(jquery_min_p("#txtcladdress").val()) && (jquery_min_p("#txtcladdress").addClass("validate"), e = 1), "" == jquery_min_p("#txtclemail").val() && (jquery_min_p("#txtclemail").addClass("validate"), e = 1), 1 != e } function RemoveClass() { "" != jquery_min_p("#txtclemail").val() && jquery_min_p("#txtclemail").removeClass("validate"), "" != jquery_min_p("#txtclname").val() && jquery_min_p("#txtclname").removeClass("validate"), "" != jquery_min_p("#txtcladdress").val() && jquery_min_p("#txtcladdress").removeClass("validate"), "" != jquery_min_p("#txtclcardno").val() && jquery_min_p("#txtclcardno").removeClass("validate"), "" != jquery_min_p("#txtclmobile").val() && jquery_min_p("#txtclmobile").removeClass("validate"), "" != jquery_min_p("#txtissuemobno").val() && jquery_min_p("#txtissuemobno").removeClass("validate"), "" != jquery_min_p("#txtissuecardno").val() && jquery_min_p("#txtissuecardno").removeClass("validate"), "" != jquery_min_p("#txtissuenwcardno").val() && jquery_min_p("#txtissuenwcardno").removeClass("validate") } function Reset() { jquery_min_p("#txtclmobile").val(""), jquery_min_p("#lblrestroid").text(""), jquery_min_p("#txtclcardno").val(""), jquery_min_p("#txtcladdress").val(""), jquery_min_p("#txtclname").val(""), jquery_min_p("#txtclemail").val(""), jquery_min_p("#txtissuecardno").val(""), jquery_min_p("#txtissuemobno").val(""), jquery_min_p("#lblricardno").text(""), jquery_min_p("#lblriname").text(""), jquery_min_p("#lblrimobno").text(""), jquery_min_p("#lblriemail").text(""), jquery_min_p("#txtclmobile").removeClass("validate"), jquery_min_p("#txtclcardno").removeClass("validate"), jquery_min_p("#txtcladdress").removeClass("validate"), jquery_min_p("#txtclname").removeClass("validate"), jquery_min_p("#txtissuecardno").removeClass("validate"), jquery_min_p("#txtissuemobno").removeClass("validate"), jquery_min_p("#txtissuenwcardno").removeClass("validate") } function FilterCardNo() { var cardno = jquery_min_p("#txtclcardno").val().replace("'", "\\'"), restroid = id, dataCompany = []; dataCompany = [], jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/CustomerLoyalty/FilterCardNo", data: "{'cardno':'" + cardno + "','restroid':'" + restroid + "'}", dataType: "json", async: !1, success: function (result) { var i = 0; jquery_min_p("#txtclcardno").html(""); var jsondata = eval(result); if ("0" == result[i].value) jquery_min_p("#hwarning").text("Card Already Issued"), jquery_min_p("#WarningPopup").modal("show"); else { for (i = 0; i < result.length; i++) dataCompany.push(result[i].cardno); jquery_min_p("#txtclcardno").autocomplete({ source: dataCompany }) } }, error: function (e) { jquery_min_p("#hwarning").text("Their is problem,Try Again"), jquery_min_p("#WarningPopup").modal("show") } }) } function FilterIssueCardNo() { var cardno = jquery_min_p("#txtclcardno").val().replace("'", "\\'"), restroid = id, dataCompany = []; dataCompany = [], jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/CustomerLoyalty/FilterCardNo", data: "{'cardno':'" + cardno + "','restroid':'" + restroid + "'}", dataType: "json", async: !1, success: function (result) { var i = 0; jquery_min_p("#txtissuenwcardno").html(""); var jsondata = eval(result); if ("0" == result[i].value) jquery_min_p("#hwarning").text("Card Already Issued"), jquery_min_p("#WarningPopup").modal("show"); else { for (i = 0; i < result.length; i++) dataCompany.push(result[i].cardno); jquery_min_p("#txtissuenwcardno").autocomplete({ source: dataCompany }) } }, error: function (e) { jquery_min_p("#hwarning").text("Their is problem,Try Again"), jquery_min_p("#WarningPopup").modal("show") } }) } function showcncarddetails() { cardno = jquery_min_p("#txtissuecardno").val(), "" != cardno && jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/CustomerLoyalty/showccarddetails", data: "{'cardno':'" + cardno + "'}", dataType: "json", async: !1, success: function (result) { var i = 0, jsondata = eval(result); jquery_min_p("#lblricardno").text(""), jquery_min_p("#lblriname").text(""), jquery_min_p("#lblrimobno").text(""), jquery_min_p("#lblriemail").text(""), jquery_min_p("#txtissuecardno").val(""), jquery_min_p("#txtissuemobno").val(""); var cardNo = jsondata[0].cardNo, CusName = jsondata[0].CusName, MobileNo = jsondata[0].MobileNo, EmailId = jsondata[0].EmailId; jquery_min_p("#lblricardno").text(cardNo), jquery_min_p("#lblriname").text(CusName), jquery_min_p("#lblrimobno").text(MobileNo), jquery_min_p("#lblriemail").text(EmailId), jquery_min_p("#lblricardno").css("display", "block"), jquery_min_p("#lblriname").css("display", "block"), jquery_min_p("#lblrimobno").css("display", "block"), jquery_min_p("#lblriemail").css("display", "block") }, error: function (e) { jquery_min_p("#hwarning").text("Their is problem,Try Again"), jquery_min_p("#WarningPopup").modal("show") } }) } function showmbcarddetails() { mobno = jquery_min_p("#txtissuemobno").val(), "" != mobno && jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/CustomerLoyalty/showmbcarddetails", data: "{'mobno':'" + mobno + "'}", dataType: "json", async: !1, success: function (result) { var i = 0, jsondata = eval(result); jquery_min_p("#lblricardno").text(""), jquery_min_p("#lblriname").text(""), jquery_min_p("#lblrimobno").text(""), jquery_min_p("#lblriemail").text(""), jquery_min_p("#txtissuecardno").val(""), jquery_min_p("#txtissuemobno").val(""); var cardNo = jsondata[0].cardNo, CusName = jsondata[0].CusName, MobileNo = jsondata[0].MobileNo, EmailId = jsondata[0].EmailId; jquery_min_p("#lblricardno").text(cardNo), jquery_min_p("#lblriname").text(CusName), jquery_min_p("#lblrimobno").text(MobileNo), jquery_min_p("#lblriemail").text(EmailId), jquery_min_p("#lblricardno").css("display", "block"), jquery_min_p("#lblriname").css("display", "block"), jquery_min_p("#lblrimobno").css("display", "block"), jquery_min_p("#lblriemail").css("display", "block") }, error: function (e) { jquery_min_p("#hwarning").text("Their is problem,Try Again"), jquery_min_p("#WarningPopup").modal("show") } }) } function ReissueCustomerLoyality() { restroid = id; var name = jquery_min_p("#lblriname").text(), cardno = jquery_min_p("#txtissuenwcardno").val().replace("'", "\\'"), mobile = jquery_min_p("#lblrimobno").text(), email = jquery_min_p("#lblriemail").text(), ocardno = jquery_min_p("#lblricardno").text(); jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/CustomerLoyalty/ReissueCustomerLoyality", data: "{'name':'" + name + "','cardno':'" + cardno + "','mobile':'" + mobile + "','email':'" + email + "','restroid':'" + restroid + "','ocardno':'" + ocardno + "'}", dataType: "json", async: !1, success: function (result) { var i = 0, jsondata = eval(result); "0" == result && (jquery_min_p("#popupsuccess").text("Card ReIssued Successfully"), jquery_min_p("#savePopup").modal("show")), Reset(), jquery_min_p("#txtissuenwcardno").val(""), jquery_min_p("#lblricardno").text(""), jquery_min_p("#lblriname").text(""), jquery_min_p("#lblrimobno").text(""), jquery_min_p("#lblriemail").text(""), jquery_min_p("#dvreissue").css("display", "none") }, error: function (e) { jquery_min_p("#hwarning").text("Their is problem,Try Again"), jquery_min_p("#WarningPopup").modal("show") } }) } function CheckReissueCardno() { var cardno = jquery_min_p("#txtissuecardno").val().replace("'", "\\'"), restroid = id; jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/CustomerLoyalty/CheckReissueCardno", data: "{'cardno':'" + cardno + "','restroid':'" + restroid + "'}", dataType: "json", async: !1, success: function (result) { var i = 0, jsondata = eval(result); "1" == jsondata[0].value ? (jquery_min_p("#txtissuecardno").val(""), jquery_min_p("#txtissuemobno").val(""), jquery_min_p("#h6warning").text("Invalid Card Number"), jquery_min_p("#dngwarn").modal("show"), jquery_min_p("#dvreissue").css("display", "none"), Reset()) : (jquery_min_p("#dvreissue").css("display", "flex"), showcncarddetails()) }, error: function (e) { jquery_min_p("#hwarning").text("Their is problem,Try Again"), jquery_min_p("#WarningPopup").modal("show") } }) } function CheckReissueMobileNo() { var mobno = jquery_min_p("#txtissuemobno").val().replace("'", "\\'"), restroid = id; ReIssuemobilecheck(), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/CustomerLoyalty/CheckReissueMobileNo", data: "{'mobno':'" + mobno + "','restroid':'" + restroid + "'}", dataType: "json", async: !1, success: function (result) { var i = 0, jsondata = eval(result); "1" == jsondata[0].value ? (jquery_min_p("#txtissuecardno").val(""), jquery_min_p("#txtissuemobno").val(""), jquery_min_p("#h6warning").text("Mobile number does not exist."), jquery_min_p("#dngwarn").modal("show"), jquery_min_p("#dvreissue").css("display", "none")) : (jquery_min_p("#dvreissue").css("display", "flex"), showmbcarddetails()) }, error: function (e) { jquery_min_p("#hwarning").text("Their is problem,Try Again"), jquery_min_p("#WarningPopup").modal("show") } }) } jquery_min_p(document).ready(function () { id = jquery_min_p("#lblrestroid").text(), jquery_min_p("#btnclissue").click(function () { if (!Validation()) return !1; jquery_min_p("#hconfirm").text("Are You Sure Want To Activate !"), jquery_min_p("#confirmationPopup").modal("show") }), jquery_min_p("#btnclreissue").click(function () { if ("" == jquery_min_p("#txtissuenwcardno").val()) return jquery_min_p("#txtissuenwcardno").addClass("validate"), !1; ReissueCustomerLoyality() }), jquery_min_p("#btnok").click(function () { jquery_min_p("#txtclcardno").val("") }), jquery_min_p("#btnwclose").click(function () { jquery_min_p("#txtclcardno").val("") }), jquery_min_p("#yesBtn").click(function () { jquery_min_p("#confirmationPopup").modal("hide"), SaveCustomerLoyality() }), jquery_min_p("#txtclmobile").keypress(function (e) { var a = e.keyCode; (a >= 65 && a <= 90 || a >= 97 && a <= 122) && e.preventDefault() }), jquery_min_p("#txtissuemobno").keypress(function (e) { var a = e.keyCode; (a >= 65 && a <= 90 || a >= 97 && a <= 122) && e.preventDefault() }), jquery_min_p("#txtclcardno").keypress(function (e) { var a = e.keyCode; (a >= 65 && a <= 90 || a >= 97 && a <= 122 || a >= 33 && a <= 47 || a >= 58 && a <= 64 || a >= 91 && a <= 96 || a >= 123 && a <= 126) && e.preventDefault() }), jquery_min_p("#txtissuecardno").keypress(function (e) { var a = e.keyCode; (a >= 65 && a <= 90 || a >= 97 && a <= 122 || a >= 33 && a <= 47 || a >= 58 && a <= 64 || a >= 91 && a <= 96 || a >= 123 && a <= 126) && e.preventDefault() }), jquery_min_p("#txtissuenwcardno").keypress(function (e) { var a = e.keyCode; (a >= 65 && a <= 90 || a >= 97 && a <= 122 || a >= 33 && a <= 47 || a >= 58 && a <= 64 || a >= 91 && a <= 96 || a >= 123 && a <= 126) && e.preventDefault() }), jquery_min_p("#txtclemail").change(function () { 1 == /^[a-zA-Z0-9._-]+@([a-zA-Z0-9.-]+\.)+[a-zA-Z0-9.-]{2,4}$/.test(document.getElementById("txtclemail").value) ? jquery_min_p("#txtclemail").removeClass("validate") : (jquery_min_p("#txtclemail").val(""), jquery_min_p("#txtclemail").attr("placeholder", "Invalid E-Mail!!"), jquery_min_p("#txtclemail").addClass("validate")) }), jquery_min_p("#txtissuemobno").keydown(function (e) { return k = e.which, k >= 96 && k <= 105 || 8 == k ? 10 == jquery_min_p(this).val().length ? 8 == k || (e.preventDefault(), !1) : void 0 : (e.preventDefault(), !1) }), jquery_min_p("#txtclmobile").keydown(function (e) { return k = e.which, k >= 96 && k <= 105 || 8 == k ? 10 == jquery_min_p(this).val().length ? 8 == k || (e.preventDefault(), !1) : void 0 : (e.preventDefault(), !1) }) });