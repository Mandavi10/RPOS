function BindKitchensection() { jquery_min_p("#divkitchensection").css("display", "block"); var e = jquery_min_p("#lblrestroid").text(); jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/KitchenSection/BindKitchensection", data: "{'id':'" + e + "'}", dataType: "json", async: !1, success: function (e) { var t = 0; jquery_min_p("#tbl tbody").empty(); var i = e.length; for (t = 0; t < i; t++) var n = n + "<tr onclick='Bindassgineditem(" + e[t].kitchensectionId + ',"' + e[t].name + "\")''><td>" + e[t].code + "</td> <td> " + e[t].name + "</td> <td style='display:none'>" + e[t].kitchensectionId + "</td> <td onclick='ShowItems(" + e[t].kitchensectionId + ',"' + e[t].name + "\");'><i class='fa fa-plus-circle' aria-hidden='true'></i></td> </tr>"; jquery_min_p("#tbl tbody").append(n), jquery_min_p("#preloader").css("display", "none"), jquery_min_p("#Overlay_Load").css("visibility", "hidden") }, beforesend: function () { jquery_min_p("#preloader").css("display", "block"), jquery_min_p("#Overlay_Load").css("visibility", "visible") }, error: function () { } }) } function ShowItems(e, t) { jquery_min_p("#divitemdetail").css("display", "none"), jquery_min_p("#checkallnewitem").prop("checked", !1), jquery_min_p("#itemgrd").modal("show"); var i = e; jquery_min_p("#lblkitchensectionid").text(i); var n = jquery_min_p("#lblrestroid").text(); jquery_min_p("#divkitchensectionname").text(t), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/KitchenSection/ShowItems", data: "{'restroid':'" + n + "'}", dataType: "json", async: !1, success: function (e) { var t = 0; jquery_min_p("#itemtable tbody").empty(); var i = e.length; if (e.length > 0) { for (t = 0; t < i; t++) var n = n + "<tr><td><input type='checkbox' name='' value='other' id='chk'></td><td>" + e[t].ItemName + "</td><td style='display:none' id='" + e[t].ItemId + "'>" + e[t].ItemId + "</td></tr>"; jquery_min_p("#itemtable tbody").append(n), jquery_min_p("#btnaddmenu").css("display", "block") } else { jquery_min_p("#itemtable tbody tr").remove(); jquery_min_p("#itemtable tbody").append("<tr><td colspan='2'>'No Record Found..'</td></tr>"), jquery_min_p("#btnaddmenu").css("display", "none") } }, error: function () { } }) } function Bindassgineditem(e, t) { jquery_min_p("#divitemdetail").css("display", "block"), jquery_min_p("#checkallOlditem").prop("checked", !1); e = e; var i = jquery_min_p("#lblrestroid").text(), n = t; jquery_min_p("#divkitchenname").text(n), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/KitchenSection/Bindassgineditem", data: "{'restroid':'" + i + "','kitchensectionId':'" + e + "'}", dataType: "json", async: !1, success: function (e) { var t = 0; jquery_min_p("#tblassigneditem tbody").empty(); var i = e.length; if (e.length > 0) { for (t = 0; t < i; t++) var n = n + "<tr><td><input type='checkbox' name='' value='other' id='check'></td><td>" + e[t].ItemName + "</td> <td style='display:none'>" + e[t].itemId + "</td><td style='display:none'>" + e[t].kitchensectionId + "</td></tr>"; jquery_min_p("#tblassigneditem tbody").append(n), jquery_min_p("#btnRemoveitem").css("display", "block") } else { jquery_min_p("#tblassigneditem tbody tr").remove(); jquery_min_p("#tblassigneditem tbody").append("<tr><td colspan='2'>'No Record Found..'</td></tr>"), jquery_min_p("#btnRemoveitem").css("display", "none") } }, error: function () { } }) } function Reset() { jquery_min_p("#checkallOlditem").attr("checked", !1), jquery_min_p("#checkallnewitem").attr("checked", !1), jquery_min_p("#chk").attr("checked", !1), jquery_min_p("#check").attr("checked", !1) } jquery_min_p(document).ready(function () { BindKitchensection(), jquery_min_p("#txtsearchkitchensection").on("keyup", function () { var e = jquery_min_p(this).val().toLowerCase(); jquery_min_p("#tblkslist   tr").filter(function () { jquery_min_p(this).toggle(jquery_min_p(this).text().toLowerCase().indexOf(e) > -1) }) }), jquery_min_p("#btnsaveclose").click(function () { jquery_min_p("#savePopup").modal("hide"), BindKitchensection(), jquery_min_p("#divitemdetail").css("display", "none"), jquery_min_p("#itemgrd").modal("hide"), Reset() }), jquery_min_p("#btnaddmenu").click(function () { var e = "<dtXml>", t = jquery_min_p("#lblrestroid").text(), i = jquery_min_p("#lblkitchensectionid").text(); jquery_min_p("#itemtable tbody").find("tr").each(function () { var t = jquery_min_p(this).closest("tr"); if (1 == t.find("#chk").prop("checked")) { e += "<dtXml "; t.find("td:nth-child(3)").text().trim(); e += 'itemId="' + t.find("td:nth-child(3)").text().trim() + '" ', e += " />" } }), e += "</dtXml>", jquery_min_p("#itemtable tbody").find("tr").each(function () { 1 == jquery_min_p(this).closest("tr").find("#chk").prop("checked") ? jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/KitchenSection/AddItem", data: "{'TableDataX':'" + e + "','id':'" + t + "','kitchensectionid':'" + i + "'}", dataType: "json", async: !1, success: function (e) { "1" == e[0].result ? (jquery_min_p("#popupsuccess").text("Item added to kitchen section successfully"), jquery_min_p("#savePopup").modal("show")) : alert("Error") }, error: function () { } }) : (jquery_min_p("#popupsuccess").text("please select Item first"), jquery_min_p("#savePopup").modal("show")) }) }), jquery_min_p("#checkallnewitem").click(function () { jquery_min_p("#checkallnewitem").is(":checked") ? jquery_min_p("#itemtable input[type=checkbox]").each(function () { jquery_min_p(this).attr("checked", !0) }) : jquery_min_p("#itemtable input[type=checkbox]").each(function () { jquery_min_p(this).attr("checked", !1) }) }), jquery_min_p("#checkallOlditem").click(function () { jquery_min_p("#checkallOlditem").is(":checked") ? jquery_min_p("#tblassigneditem input[type=checkbox]").each(function () { jquery_min_p(this).attr("checked", !0) }) : jquery_min_p("#tblassigneditem input[type=checkbox]").each(function () { jquery_min_p(this).attr("checked", !1) }) }), jquery_min_p("#btnRemoveitem").click(function () { var e = "<dtXml>", t = jquery_min_p("#lblrestroid").text(); jquery_min_p("#tblassigneditem tbody").find("tr").each(function () { var t = jquery_min_p(this).closest("tr"); if (1 == t.find("#check").prop("checked")) { e += "<dtXml "; t.find("td:nth-child(3)").text().trim(); e += 'itemId="' + t.find("td:nth-child(3)").text().trim() + '" ', e += 'KitchenSectionId="' + t.find("td:nth-child(4)").text().trim() + '" ', e += 'itemName="' + t.find("td:nth-child(2)").text().trim() + '" ', e += " />" } }), e += "</dtXml>", jquery_min_p("#tblassigneditem tbody").find("tr").each(function () { 1 == jquery_min_p(this).closest("tr").find("#check").prop("checked") ? jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/KitchenSection/RemoveItem", data: "{'TableDataX':'" + e + "','id':'" + t + "'}", dataType: "json", async: !1, success: function (e) { "1" == e[0].result ? (jquery_min_p("#popupsuccess").text("Item Remove from kitchen section successfully"), jquery_min_p("#savePopup").modal("show"), BindKitchensection()) : alert("Error") }, error: function () { } }) : (jquery_min_p("#popupsuccess").text("please Check Item first"), jquery_min_p("#savePopup").modal("show")) }) }) });