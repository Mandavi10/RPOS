var id = ""; function BindSittingSection() { jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/SectionTable/BindSittingSection", data: "{'id':'" + id + "'}", dataType: "json", async: !1, success: function (e) { var i = 0, n = e.length, t = "", s = ""; for (i = 0; i < n; i++) 0 == i ? (s = e[i].sittingsectionId, t = t + "<div class='sectionBox active headtblbox' onclick='BindTables(" + e[i].sittingsectionId + ")'>") : t = t + "<div class='sectionBox headtblbox' onclick='BindTables(" + e[i].sittingsectionId + ")'>", t = (t += "<img src='/Content/images/family-icon-sm.png' />") + "<h6>" + e[i].name + "</h6></div>"; jquery_min_p("#divsittingsection").append(t), BindTables(s), jquery_min_p("#preloader").css("display", "none"), jquery_min_p("#Overlay_Load").css("visibility", "hidden") }, beforesend: function () { jquery_min_p("#preloader").css("display", "block"), jquery_min_p("#Overlay_Load").css("visibility", "visible") }, error: function () { } }) } function BindvacantTable() { jquery_min_p("#sourceFields").html(""); var e = id; jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/SectionTable/BindvacantTable", data: "{'restroId':'" + e + "'}", dataType: "json", async: !1, success: function (e) { var i = 0, n = e.length, t = ""; for (i = 0; i < n; i++) t = t + "<div class='sectionBox' id='" + e[i].tableId + "' onclick='SelectElement_Source(" + e[i].tableId + ")'>", t = (t += "<img src='/Content/images/table-icon-sm.png' />") + "<h6>" + e[i].name + "</h6></div>"; jquery_min_p("#sourceFields").append(t) }, error: function () { } }) } function SelectElement_Source(e) { jquery_min_p("#checkall").prop("checked", !1), e = "#" + e, jquery_min_p(e).hasClass("active") ? jquery_min_p(e).removeClass("active") : jquery_min_p(e).addClass("active"), jquery_min_p("#destinationFields .sectionBox").each(function () { $(this).hasClass("active") && jquery_min_p(this).removeClass("active") }) } function SelectElement_Dest(e) { e = "#" + e, jquery_min_p("#chkall").prop("checked", !1), jquery_min_p(e).hasClass("active") ? jquery_min_p(e).removeClass("active") : jquery_min_p(e).addClass("active"), jquery_min_p("#sourceFields .sectionBox").each(function () { $(this).hasClass("active") && jquery_min_p(this).removeClass("active") }) } function BindTables(e) { jquery_min_p("#destinationFields").html(""), jquery_min_p("#Sectionname").html(""); var i = id; e = e; jquery_min_p("#lblsittingsectionid").text(e), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/SectionTable/BindSittingTables", data: "{'sittingsectionId':'" + e + "','Restroid':'" + i + "'}", dataType: "json", async: !1, success: function (e) { var i = 0, n = e.length, t = "", s = ""; s = s + "<h5>" + e[i].sittingsectionname + "</h5>", s += " <div class='selectAll'><input type='checkbox' onClick='CheckboxClick();'  id='checkall' class='checkall' /> Select All</div>", jquery_min_p("#Sectionname").append(s); for (i = 0; i < n; i++) t = t + "<div class='sectionBox' id='" + e[i].tableId + "' onclick='SelectElement_Dest(" + e[i].tableId + ")'>", t = (t += "<img src='/Content/images/table-icon-sm.png' />") + "<h6>" + e[i].name + "</h6></div>"; jquery_min_p("#destinationFields").append(t) }, error: function () { } }) } function CheckboxClick() { 1 == jquery_min_p("#checkall").prop("checked") ? (jquery_min_p("#chkall").prop("checked", !1), jquery_min_p("#sourceFields .sectionBox").each(function () { jquery_min_p(this).removeClass("active") }), jquery_min_p("#destinationFields .sectionBox").each(function () { jquery_min_p(this).addClass("active") })) : jquery_min_p("#destinationFields .sectionBox").each(function () { jquery_min_p(this).removeClass("active") }) } function AddTable(e) { var i = "#" + e; jquery_min_p(i).hasClass("active") ? jquery_min_p(i).removeClass("active") : jquery_min_p(i).addClass("active") } jquery_min_p(document).ready(function () { id = jquery_min_p("#lblrestroid").text(), BindSittingSection(), BindvacantTable(), jquery_min_p("#divsittingsection .sectionBox").click(function () { $("#divsittingsection .sectionBox").removeClass("active"), jquery_min_p("#divsittingsection .sectionBox").removeClass("active"), jquery_min_p("#chkall").prop("checked", !1), jquery_min_p(this).addClass("active"), $("#sourceFields .sectionBox").hasClass("active") && jquery_min_p("#sourceFields .sectionBox").removeClass("active") }), jquery_min_p("#btnsaveclose").click(function () { jquery_min_p("#savePopup").modal("hide") }), jquery_min_p("#btnrightarrow").click(function () { var e = "<dtXml>", i = jquery_min_p("#lblsittingsectionid").text(), n = id; $("#sourceFields .sectionBox").each(function (n) { if ($(this).hasClass("active")) { e += "<dtXml "; var t = jquery_min_p(this)[0].id; e += 'tableId="' + t + '" ', e += 'sittingsectionId="' + i + '" ', e += " />" } }), e += "</dtXml>", $("#sourceFields .sectionBox").hasClass("active") ? jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/SectionTable/MoveTableInDestination", data: "{'TableDataX':'" + e + "','restroId':'" + n + "'}", dataType: "json", async: !1, success: function (e) { "1" == e[0].result ? (jquery_min_p("#popupsuccess").text("Table Added To This Section successfully"), jquery_min_p("#savePopup").modal("show"), BindvacantTable(), BindTables(i)) : alert("Error") }, error: function () { } }) : (jquery_min_p("#lblwarning").text("Please Select Table First"), jquery_min_p("#warningpopup").modal("show")) }), jquery_min_p("#btnleftarrow").click(function () { var e = "<dtXml>", i = jquery_min_p("#lblsittingsectionid").text(), n = id; $("#destinationFields .sectionBox").each(function (n) { if ($(this).hasClass("active")) { e += "<dtXml "; var t = jquery_min_p(this)[0].id; e += 'tableId="' + t + '" ', e += 'sittingsectionId="' + i + '" ', e += " />" } }), e += "</dtXml>", $("#destinationFields .sectionBox").hasClass("active") ? jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/SectionTable/MoveTableInSource", data: "{'TableDataX':'" + e + "','restroId':'" + n + "'}", dataType: "json", async: !1, success: function (e) { console.log(e[0]), "1" == e[0].result ? (jquery_min_p("#popupsuccess").text("Table Remove From This Section Successfully"), jquery_min_p("#savePopup").modal("show"), BindvacantTable(), BindTables(i)) : alert("Error") }, error: function () { } }) : (jquery_min_p("#lblwarning").text("Please Select Table First"), jquery_min_p("#warningpopup").modal("show")) }), jquery_min_p(".checkall").click(function () { 1 == jquery_min_p("#checkall").prop("checked") ? (jquery_min_p("#chkall").prop("checked", !1), jquery_min_p("#sourceFields .sectionBox").each(function () { jquery_min_p(this).removeClass("active") }), jquery_min_p("#destinationFields .sectionBox").each(function () { jquery_min_p(this).addClass("active") })) : jquery_min_p("#destinationFields .sectionBox").each(function () { jquery_min_p(this).removeClass("active") }) }), jquery_min_p("#chkall").click(function () { 1 == jquery_min_p("#chkall").prop("checked") ? (jquery_min_p("#checkall").prop("checked", !1), jquery_min_p("#sourceFields .sectionBox").each(function () { jquery_min_p(this).addClass("active") }), jquery_min_p("#destinationFields .sectionBox").each(function () { jquery_min_p(this).removeClass("active") })) : jquery_min_p("#sourceFields .sectionBox").each(function () { jquery_min_p(this).removeClass("active") }) }) });