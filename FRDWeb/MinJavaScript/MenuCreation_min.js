var Query = "", restroid = "", IsCurrent = 0, restrolevelid = 0, levelid = 0, levelname = "", level = ""; function BindMenu() { restroid = jquery_min_p("#lblrestroid").text(), jquery_min_p("#ddlselectmenu").html(""), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/BindMenu", data: "{'restroid':'" + restroid + "'}", dataType: "json", async: !1, success: function (result) { for (var i = 0, jsondata = eval(result), i = 0; i < result.length; i++) { var newOption = $("<option>"); newOption.attr("value", result[i].RestroMenuId).text(result[i].Name), 1 == result[i].IsCurrent && newOption.attr("selected", "selected"), $("#ddlselectmenu").append(newOption) } } }) } function SaveMenu() { bootstrap_min_p("#addRestroPopup").modal("hide"), bootstrap_min_p("#Updatemenu").modal("hide"); var e = jquery_min_p("#lblrestromenuid").text(), t = jquery_min_p("#txtmenu_" + e).val(), i = jquery_min_p("#txtmenuname").val(); "" == e && (e = 0), restroid = jquery_min_p("#lblrestroid").text(), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/SaveMenu", data: "{'menuname':'" + i + "','restroid':'" + restroid + "','restromenuid':'" + e + "','newname':'" + t + "'}", dataType: "json", async: !1, success: function (e) { "1" == e[0].result && jquery_min_p("#popupsuccess").text("Menu Saved Successfully"), "2" == e[0].result && jquery_min_p("#popupsuccess").text("Menu Updated Successfully"), bootstrap_min_p("#savePopup").modal("show") } }) } function EditMenu() { jquery_min_p("#diveditmenu").html(""), restroid = jquery_min_p("#lblrestroid").text(), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/BindMenu", data: "{'restroid':'" + restroid + "'}", dataType: "json", async: !1, success: function (e) { for (var t = e.length, i = "", l = 0; l < t; l++) i = (i += "<span class='col-sm-4 col-md-10 col-4 col-form-label'>") + "<input type='text' class='form-control' placeholder='MAL-Menu' id='txtmenu_" + e[l].RestroMenuId + "' value='" + e[l].Name + "' disabled/>", i += "</span>", i = (i = (i += "<div class='col-sm-8 col-md-2 col-8'>") + "<i class='fa fa-pencil-square-o pt-2 fa-2x' style='color:#2dc740' aria-hidden='true' id='btnedit' onclick='Update(" + e[l].RestroMenuId + ")'></i>") + "<i class='fa fa-trash pt-2 fa-2x' style='color:#ef5656 !important' aria-hidden='true' id='btndelete' onclick='delconfirmpopup(" + e[l].RestroMenuId + ',"' + e[l].Name + "\",5)'></i>", i += "</div>"; jquery_min_p("#diveditmenu").append(i), bootstrap_min_p("#Updatemenu").modal("show") } }) } function Update(e) { jquery_min_p("#txtmenu_" + e).attr("disabled", !1), jquery_min_p("#lblrestromenuid").text(e) } function Delete() { bootstrap_min_p("#Updatemenu").modal("hide"), restroid = jquery_min_p("#lblrestroid").text(); jquery_min_p("#id").attr("disabled", !1), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/DeleteMenu", data: "{'restroid':'" + restroid + "','restrolevelid':'" + restrolevelid + "'}", dataType: "json", async: !1, success: function (e) { 1 == e[0].result ? (jquery_min_p("#hwarning").text("Menu Cannot Be Deleted!!"), bootstrap_min_p("#WarningPopup").modal("show")) : (jquery_min_p("#popupsuccess").text("Menu Deleted Successfully"), bootstrap_min_p("#savePopup").modal("show"), BindMenu()) } }) } function BindItem() { jquery_min_p(".noDataMsg").css("display", "none"), restroid = jquery_min_p("#lblrestroid").text(); var e = jquery_min_p("#ddlselectmenu").val(); jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/BindItem", data: "{'restroid':'" + restroid + "','restromenuid':'" + e + "'}", dataType: "json", async: !1, success: function (e) { var t = 0; jquery_min_p("#itemTable tbody").empty(); var i = e.length; for (t = 0; t < i; t++) { var l = l + "<tr>"; l = l + "<td style='display:none'> " + e[t].ItemId + " </td>", l = (l = (l += "<td><input type='checkbox' class='chk' id='chk' /></td>") + "<td> " + e[t].ItemName + " </td>") + "<td> " + e[t].ItemSalePrice + " </td>", l += "</tr>" } jquery_min_p("#itemTable tbody").append(l), jquery_min_p("#divitemtbl").css("display", "block"), jquery_min_p("#btnsaveitem").css("display", "inline-block"), jquery_min_p("#divhlevel").css("display", "block"), jquery_min_p("#preloader").css("display", "none"), jquery_min_p("#Overlay_Load").css("visibility", "hidden") }, beforesend: function () { jquery_min_p("#preloader").css("display", "block"), jquery_min_p("#Overlay_Load").css("visibility", "visible") }, error: function () { } }) } function BindLevel() { jquery_min_p("#divmenugrid").css("display", "block"), jquery_min_p(".noDataMsg").css("display", "block"), jquery_min_p("#divhlevel").css("display", "none"), jquery_min_p("#divitemtbl").css("display", "none"), jquery_min_p("#divmenucreation").html(""), Query = ""; var e = jquery_min_p("#ddlselectmenu option:selected").text(), t = jquery_min_p("#ddlselectmenu").val(); restroid = jquery_min_p("#lblrestroid").text(), jquery_min_p("#hmenu").text(e), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/BindLevel1", data: "{'restroid':'" + restroid + "','restromenuid':'" + t + "'}", dataType: "json", async: !1, success: function (e) { var t = 0; jquery_min_p("#divlevel1").html(""); var i = e.length; for (t = 0; t < i; t++) Query += "<div class='panel panel-default mt-2'>", Query = (Query += "<a data-toggle='collapse' href='#Bevrages' class='acolor'>") + "<div class='panel-heading' id='divlevel1_" + e[t].RestroMenuLevel1Id + "' >", Query += "<div class='row headcolor mt-1'>", Query = (Query += "<div class=''>") + "<h4 class='h4mrgbtm'><i class='fa fa-cutlery' aria-hidden='true'></i>" + e[t].name + "</h4>", Query = (Query += "<div class='menuList1'>") + "<label class='menulbl mr-1' data-toggle='modal' data-target='#sublevel' onclick='bidnsublevel1id(" + e[t].RestroMenuLevel1Id + ")'>Sublevel</label><label id='test' class='menulbl mr-1' onclick='BindItemclick(" + e[t].RestroMenuLevel1Id + ',"' + e[t].name + "\")'>Add Item</label><label class='' id='level1edit_" + e[t].RestroMenuLevel1Id + "' onclick='editlevel(" + e[t].RestroMenuLevel1Id + ',"' + e[t].name + "\")'><img src='../../Content/images/edit2020.png' style='width: 80%;'/></label><label class='' id='level3delete_" + e[t].RestroMenuLevel1Id + "' onclick='delconfirmpopup(" + e[t].RestroMenuLevel1Id + ',"' + e[t].name + "\",1)'><img src='../../Content/images/delete-icon-sm.png' /></label>", Query += "</div></div></div></div> </a>", BindLevel1(e[t].RestroMenuLevel1Id), Query += "</div>"; jquery_min_p("#preloader").css("display", "none"), jquery_min_p("#Overlay_Load").css("visibility", "hidden") }, beforesend: function () { jquery_min_p("#preloader").css("display", "block"), jquery_min_p("#Overlay_Load").css("visibility", "visible") } }), jquery_min_p("#divmenucreation").append(Query) } function bidnsublevel1id(e) { jquery_min_p("#lblmenulevel1id").text(e), jquery_min_p("#btnsublevel").text("Save"), jquery_min_p("#txtsublevel").val("") } function BindLevel1(e) { jquery_min_p("#itemlevel1table_" + e + "tbody").empty(); var t = jquery_min_p("#ddlselectmenu").val(); restroid = jquery_min_p("#lblrestroid").text(), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/BindItemLevel1", data: "{'restroid':'" + restroid + "','restromenuid':'" + t + "','RestroMenuLevel1Id':'" + e + "'}", dataType: "json", async: !1, success: function (i) { var l = 0, n = i.length; if (n > 0) { Query = Query + "<div class='panel-collapse collapse show' id='level1item_" + e + "'>", Query += "<div class='panel-body'>", Query = (Query += "<div class='row'>") + "<table class='tblscroll' id='itemlevel1table_" + e + "'>", Query += "<thead><tr> <th>Item Name</th><th>Item Price</th><th>Edit</th><th>Delete</th></tr></thead>", Query += "<tbody>"; for (l = 0; l < n; l++) Query = (Query = (Query = (Query = (Query += "<tr>") + "<td>" + i[l].itemname + "</td>") + "<td>" + i[l].itemPrice + "</td>") + "<td><i class='fa fa-pencil-square-o' aria-hidden='true' id='itemlevel1edit_" + e + "' onclick='edititem(" + i[l].RestroMenuItemId + ',"' + i[l].itemname + '","' + i[l].itemPrice + "\")'></i></td>") + "<td><i class='fa fa-trash' aria-hidden='true' id='itemlevel1delete_" + e + "' onclick='delconfirmpopup(" + i[l].RestroMenuItemId + ',"' + i[l].itemname + "\",4)'></i></td>", Query += "</tr>"; Query += "</tbody></table>", Query += "</div></div></div></div>" } jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/BindLevel2", data: "{'restroid':'" + restroid + "','restromenuid':'" + t + "','RestroMenuLevel1Id':'" + e + "'}", dataType: "json", async: !1, success: function (e) { if (e.length > 0) for (var t = e.length, i = 0; i < t; i++) Query += "<div class='panel-group pt-1 pl-2'>", Query += "<div class='panel panel-default'>", Query = (Query += "<a data-toggle='collapse' href='#HotAppetize1' class='acolor'>") + "<div class='panel-heading divlevel2' id='divlevel2_" + e[i].RestroMenuLevel2Id + "'>", Query += "<div class='row headcolor mt-1'>", Query = (Query += "<div class=''>") + "<h4 class='h4mrgbtm'><i class='fa fa-cutlery' aria-hidden='true'></i>" + e[i].name + "</h4>", Query = (Query += "<div class='menuList1'>") + "<label class='menulbl mr-1' data-toggle='modal' data-target='#sublevel'  onclick='bidnsublevel2id(" + e[i].RestroMenuLevel2Id + ")'>Sublevel</label><label class='menulbl mr-1' onclick='BindItemclick(" + e[i].RestroMenuLevel2Id + ',"' + e[i].name + "\")'>Add Item</label><label class='' id='level2edit_" + e[i].RestroMenuLevel2Id + "' onclick='editsublevel(" + e[i].RestroMenuLevel2Id + ',"' + e[i].name + "\")'><img src='../../Content/images/edit2020.png' style='width: 80%;' /></label><label class='' id='level3delete_" + e[i].RestroMenuLevelId + "' onclick='delconfirmpopup(" + e[i].RestroMenuLevel2Id + ',"' + e[i].name + "\",2)'><img src='../../Content/images/delete-icon-sm.png' /></label>", Query += "</div></div></div></div></a>", BindItemLevel2(e[i].RestroMenuLevel2Id) } }) } }) } function bidnsublevel2id(e) { jquery_min_p("#lblmenulevel2id").text(e), jquery_min_p("#btnsublevel").text("Save"), jquery_min_p("#txtsublevel").val("") } function BindItemLevel2(e) { jquery_min_p("#itemlevel2table_" + e + "tbody").empty(); var t = jquery_min_p("#ddlselectmenu").val(); restroid = jquery_min_p("#lblrestroid").text(), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/BindItemLevel2", data: "{'restroid':'" + restroid + "','restromenuid':'" + t + "','RestroMenuLevel2Id':'" + e + "'}", dataType: "json", async: !1, success: function (i) { var l = 0, n = i.length; if (i.length > 0) { Query = Query + "<div id='level2item_" + e + "' class='panel-collapse collapse show'>", Query += "<div class='panel-body'>", Query = (Query += "<div class='row'>") + "<table class='itemlevel2table tblscroll' id='itemlevel2table_" + e + "'>", Query += "<thead><tr> <th>Item Name</th><th>Item Price</th><th>Edit</th><th>Delete</th></tr></thead>", Query += "<tbody>"; for (l = 0; l < n; l++) Query = (Query = (Query = (Query = (Query += "<tr>") + "<td>" + i[l].itemname + "</td>") + "<td>" + i[l].itemPrice + "</td>") + "<td><i class='fa fa-pencil-square-o' aria-hidden='true' id='itemlevel2edit_" + e + "' onclick='edititem(" + i[l].RestroMenuItemId + ',"' + i[l].itemname + '","' + i[l].itemPrice + "\")'></i></td>") + "<td><i class='fa fa-trash' aria-hidden='true' id='itemlevel2delete_" + e + "' onclick='delconfirmpopup(" + i[l].RestroMenuItemId + ',"' + i[l].itemname + "\",4)'></i></td>", Query += "</tr>"; Query += "</tbody></table>", Query += "</div></div></div>" } jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/BindLevel3", data: "{'restroid':'" + restroid + "','restromenuid':'" + t + "','RestroMenuLevel2Id':'" + e + "'}", dataType: "json", async: !1, success: function (e) { var t = e.length; if (e.length > 0) for (var i = 0; i < t; i++) Query += "<div class='panel-group pt-1 pl-3 pr-0'>", Query += "<div class='panel panel-default'>", Query = (Query += "<a data-toggle='collapse' href='#HotAppetize2' class='acolor'>") + "<div class='panel-heading divlevel3' id='divlevel3_" + e[i].RestroMenuLevel3Id + "'>", Query += "<div class='row headcolor mt-1'>", Query = (Query += "<div class=''>") + "<h4 class='h4mrgbtm'><i class='fa fa-cutlery' aria-hidden='true'></i>" + e[i].name + "</h4>", Query = (Query += "<div class='menuList1'>") + "<label class='menulbl mr-1' onclick='BindItemclick(" + e[i].RestroMenuLevel3Id + ',"' + e[i].name + "\")'>Add Item</label><label class='' id='level3edit_" + e[i].RestroMenuLevel3Id + "' onclick='editsublevel2(" + e[i].RestroMenuLevel3Id + ',"' + e[i].name + "\")'><img src='../../Content/images/edit2020.png' style='width: 80%;' /></label><label class='' id='level3delete_" + e[i].RestroMenuLevel3Id + "' onclick='delconfirmpopup(" + e[i].RestroMenuLevel3Id + ',"' + e[i].name + "\",3)'><img src='../../Content/images/delete-icon-sm.png' /></label>", Query += "</div></div></div></div></a>", BindItemLevel3(e[i].RestroMenuLevel3Id) } }), Query += "</div></div>" } }) } function BindItemLevel3(e) { jquery_min_p("#itemlevel3table_" + e + "tbody").empty(); var t = jquery_min_p("#ddlselectmenu").val(); restroid = jquery_min_p("#lblrestroid").text(), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/BindItemLevel3", data: "{'restroid':'" + restroid + "','restromenuid':'" + t + "','RestroMenuLevel3Id':'" + e + "'}", dataType: "json", async: !1, success: function (t) { var i = 0, l = t.length; if (t.length > 0) { Query = Query + "<div id='level3item_" + e + "' class='panel-collapse collapse show'>", Query += "<div class='panel-body'>", Query = (Query += "<div class='row'>") + "<table class='itemlevel3table tblscroll' id='itemlevel3table_" + e + "'>", Query += "<thead><tr> <th>Item Name</th><th>Item Price</th><th>Edit</th><th>Delete</th></tr></thead>", Query += "<tbody>"; for (i = 0; i < l; i++) Query = (Query = (Query = (Query = (Query += "<tr>") + "<td>" + t[i].itemname + "</td>") + "<td>" + t[i].itemPrice + "</td>") + "<td><i class='fa fa-pencil-square-o' aria-hidden='true' id='itemlevel3edit_" + e + "' onclick='edititem(" + t[i].RestroMenuItemId + ',"' + t[i].itemname + '","' + t[i].itemPrice + "\")'></i></td>") + "<td><i class='fa fa-trash' aria-hidden='true' id='itemlevel3delete_" + e + "' onclick='delconfirmpopup(" + t[i].RestroMenuItemId + ',"' + t[i].itemname + "\",4)'></i></td>", Query += "</tr>"; Query += "</tbody></table>", Query += "</div></div></div></div></div></div>" } Query += "</div></div>" } }) } function edititem(e, t, i) { bootstrap_min_p("#editItem").modal("show"), jquery_min_p("#lbledititemid").text(e), jquery_min_p("#lbledititemname").text(t), jquery_min_p("#txtedititemprice").val(i) } function deleteitem() { var e = jquery_min_p("#ddlselectmenu").val(); restroid = jquery_min_p("#lblrestroid").text(), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/DeleteItem", data: "{'restrolevelid':'" + restrolevelid + "','restromenuid':'" + e + "','restroid':'" + restroid + "'}", dataType: "json", async: !1, success: function (e) { 1 == e[0].result ? (jquery_min_p("#hwarning").text("Item Cannot Be Deleted!!"), bootstrap_min_p("#WarningPopup").modal("show")) : (jquery_min_p("#popupsuccess").text("Item Deleted Successfully"), bootstrap_min_p("#savePopup").modal("show"), BindItem()) } }) } function Savelevel1() { var e = jquery_min_p("#ddlselectmenu").val(); restroid = jquery_min_p("#lblrestroid").text(); var t = jquery_min_p("#txtlevel").val(), i = jquery_min_p("#lbleditlevelid").val(); jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/InsertLevel1", data: "{'restroid':'" + restroid + "','restromenuid':'" + e + "','levelname':'" + t + "','RestroMenulevel1id':'" + i + "'}", dataType: "json", async: !1, success: function (e) { if (e.length > 0) { "1" == e[0].result && jquery_min_p("#popupsuccess").text("Level Saved Successfully"), "2" == e[0].result && jquery_min_p("#popupsuccess").text("Level Updated Successfully"), bootstrap_min_p("#savePopup").modal("show"), Reset() } } }) } function Savelevel2() { var e, t, i = jquery_min_p("#ddlselectmenu").val(); restroid = jquery_min_p("#lblrestroid").text(); var l = jquery_min_p("#txtsublevel").val(); e = jquery_min_p("#lblmenulevel1id").text().trim(), t = jquery_min_p("#lblmenulevel2id").text().trim(); var n = jquery_min_p("#lbleditlevel1id").val(), r = jquery_min_p("#lbleditlevel2id").val(); "" == r && "" == t ? jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/InsertLevel2", data: "{'restroid':'" + restroid + "','restromenuid':'" + i + "','levelname':'" + l + "','menulevel1id':'" + e + "','RestroMenulevel1id':'" + n + "'}", dataType: "json", async: !1, success: function (e) { if (e.length > 0) { "1" == e[0].result && jquery_min_p("#popupsuccess").text("Level Saved Successfully"), "2" == e[0].result && jquery_min_p("#popupsuccess").text("Level Updated Successfully"), bootstrap_min_p("#savePopup").modal("show"), Reset() } } }) : jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/InsertLevel3", data: "{'restroid':'" + restroid + "','restromenuid':'" + i + "','levelname':'" + l + "','menulevel2id':'" + t + "','RestroMenulevel2id':'" + r + "'}", dataType: "json", async: !1, success: function (e) { if (e.length > 0) { "1" == e[0].result && jquery_min_p("#popupsuccess").text("Level Saved Successfully"), "2" == e[0].result && jquery_min_p("#popupsuccess").text("Level Updated Successfully"), bootstrap_min_p("#savePopup").modal("show"), Reset() } } }) } function BindItemclick(e, t) { jquery_min_p("#lbllevelid").text(e), jquery_min_p("#hlevel").text(t), BindItem() } function Insertitemlevel3() { var e = ""; e = "<dtXml>"; var t = jquery_min_p("#lbllevelid").text(), i = jquery_min_p("#ddlselectmenu").val(); restroid = jquery_min_p("#lblrestroid").text(), jquery_min_p("#itemTable tbody").find("tr").each(function (t) { var i = jquery_min_p(this).closest("tr"); if (1 == i.find("#chk").prop("checked")) { var l = i.find("td:nth-child(1)").text().trim(), n = i.find("td:nth-child(4)").text().trim(); e += "<dtXml ", e += 'itemprice="' + n + '" ', e += 'itemid="' + l + '" ', e += " />" } }), e += "</dtXml>", jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/Insertitemlevel3", data: "{'restroid':'" + restroid + "','restromenuid':'" + i + "','restrolevelid':'" + t + "','dtitem':'" + e + "'}", dataType: "json", async: !1, success: function (e) { e.length > 0 && (jquery_min_p("#popupsuccess").text("Item Saved Successfully"), bootstrap_min_p("#savePopup").modal("show")) } }), BindItem() } function updateitemprice() { bootstrap_min_p("#confirmationPopup").modal("hide"); var e = jquery_min_p("#lbledititemid").text(), t = jquery_min_p("#txtedititemprice").val(); "" == t ? jquery_min_p("#txtedititemprice").addClass("validate") : jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/UpdateItemPrice", data: "{'RestroMenuItemId':'" + e + "','itemprice':'" + t + "'}", dataType: "json", async: !1, success: function (e) { e.length > 0 && (bootstrap_min_p("#editItem").modal("hide"), jquery_min_p("#popupsuccess").text("Item Updated Successfully"), bootstrap_min_p("#savePopup").modal("show"), BindItem()) } }) } function defaultMenu() { restroid = jquery_min_p("#lblrestroid").text(), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/defaultMenu", data: "{'restroid':'" + restroid + "'}", dataType: "json", async: !1, success: function (e) { IsCurrent = 1 == (IsCurrent = e[0].IsCurrent) ? 1 : 0 } }), BindLevel() } function editlevel(e, t) { jquery_min_p("#lbleditlevelid").val(""), jquery_min_p("#haddlevel").text("Update Level"), jquery_min_p("#btnsavelevel").text("Update"), bootstrap_min_p("#addlevel").modal("show"), jquery_min_p("#lbleditlevelid").val(e), jquery_min_p("#txtlevel").val(t) } function editsublevel(e, t) { jquery_min_p("#btnsublevel").text(""), jquery_min_p("#lbleditlevel1id").val(""), jquery_min_p("#btnsublevel").text("Update"), bootstrap_min_p("#sublevel").modal("show"), jquery_min_p("#lbleditlevel1id").val(e), jquery_min_p("#txtsublevel").val(t), levelname = t } function editsublevel2(e, t) { jquery_min_p("#btnsublevel").text(""), jquery_min_p("#lbleditlevel2id").val(""), jquery_min_p("#lbleditlevel2id").val(e), jquery_min_p("#txtsublevel").val(t), jquery_min_p("#btnsublevel").text("Update"), bootstrap_min_p("#sublevel").modal("show"), levelname = t } function deletelevel() { var e = jquery_min_p("#ddlselectmenu").val(); restroid = jquery_min_p("#lblrestroid").text(), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/DeleteLevel1", data: "{'restroid':'" + restroid + "','restrolevelid':'" + restrolevelid + "','restromenuid':'" + e + "'}", dataType: "json", async: !1, success: function (e) { e.length > 0 && (jquery_min_p("#popupsuccess").text("MenuLevel Deleted Successfully"), bootstrap_min_p("#savePopup").modal("show"), BindItem()) } }) } function deletesublevel1() { var e = jquery_min_p("#ddlselectmenu").val(); restroid = jquery_min_p("#lblrestroid").text(), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/DeleteLevel2", data: "{'restroid':'" + restroid + "','restrolevelid':'" + restrolevelid + "','restromenuid':'" + e + "'}", dataType: "json", async: !1, success: function (e) { e.length > 0 && (jquery_min_p("#popupsuccess").text("MenuLevel Deleted Successfully"), bootstrap_min_p("#savePopup").modal("show"), BindItem()) } }) } function deletesublevel2() { var e = jquery_min_p("#ddlselectmenu").val(); restroid = jquery_min_p("#lblrestroid").text(), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/DeleteLevel3", data: "{'restroid':'" + restroid + "','restrolevelid':'" + restrolevelid + "','restromenuid':'" + e + "'}", dataType: "json", async: !1, success: function (e) { e.length > 0 && (jquery_min_p("#popupsuccess").text("MenuLevel Deleted Successfully"), bootstrap_min_p("#savePopup").modal("show"), BindItem()) } }) } function delconfirmpopup(e, t, i) { 4 == i ? jquery_min_p("#hconfirmdel").text("Are You Sure to Delete " + t + " Item ??") : 5 == i ? jquery_min_p("#hconfirmdel").text("Are You Sure to Delete " + t + " Menu ??") : jquery_min_p("#hconfirmdel").text("Are You Sure to Delete " + t + "  (Level " + i + ") ??"), bootstrap_min_p("#deletePopup1").modal("show"), restrolevelid = e, levelid = i } function Reset() { jquery_min_p("#lblmenulevel1id").text(""), jquery_min_p("#lblmenulevel2id").text(""), jquery_min_p("#lblmenulevel3id").text(""), jquery_min_p("#lbleditlevelid").val(""), jquery_min_p("#lbleditlevel1id").val(""), jquery_min_p("#lbleditlevel2id").val(""), jquery_min_p("#txtlevel").val(""), jquery_min_p("#txtsublevel").val(""), jquery_min_p("#lbledititemid").text(""), jquery_min_p("#txtedititemprice").val(""), jquery_min_p("#lbllevelid").text(""), IsCurrent = 0 } function RemoveClass() { "" != jquery_min_p("#txtmenuname").val() && jquery_min_p("#txtmenuname").removeClass("validate"), "" != jquery_min_p("#txtlevel").val() && jquery_min_p("#txtlevel").removeClass("validate"), "" != jquery_min_p("#txtsublevel").val() && jquery_min_p("#txtsublevel").removeClass("validate"), "" != jquery_min_p("#txtedititemprice").val() && jquery_min_p("#txtedititemprice").removeClass("validate") } function printResult() { var e = jquery_min_p("#divprntmenucreation").html(), t = window.open("", "", "height=600,width=800"); t.document.write("<html><head><title>Menu</title>"), t.document.write("</head><body >"), t.document.write(e), t.document.write("</body></html>"), t.document.close(), t.print() } function PrintBindRestroImage() { var id = restroid; $.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/Home/BindResturantDetail", data: "{'id':'" + id + "'}", dataType: "json", async: !1, success: function (result) { var i = 0, jsonData = eval(result); jquery_min_p("#prntimgPreview").attr("src", jsonData[0].Base64Image), jquery_min_p("#preloader").css("display", "none"), jquery_min_p("#Overlay_Load").css("visibility", "hidden") }, beforesend: function () { jquery_min_p("#preloader").css("display", "block"), jquery_min_p("#Overlay_Load").css("visibility", "visible") }, error: function () { } }) } function PrintBindLevel() { jquery_min_p("#divmenugrid").css("display", "block"), jquery_min_p(".noDataMsg").css("display", "block"), jquery_min_p("#divhlevel").css("display", "none"), jquery_min_p("#divitemtbl").css("display", "none"), jquery_min_p("#divmenucreation").html(""), Query = ""; var e = jquery_min_p("#ddlselectmenu option:selected").text(), t = jquery_min_p("#ddlselectmenu").val(); restroid = jquery_min_p("#lblrestroid").text(), jquery_min_p("#hmenu").text(e), jquery_min_p("#divprntmenucreation").html(""), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/BindLevel1", data: "{'restroid':'" + restroid + "','restromenuid':'" + t + "'}", dataType: "json", async: !1, success: function (e) { var t = 0; jquery_min_p("#divlevel1").html(""); var i = e.length; Query += "<div style='width: 50%;margin: 0px auto;padding: 5px;border-radius: 2px;border: 1px solid #cdcdcd;background-color: #fbfbfb'>", Query = (Query += " <div style='width:100%;position: relative;'>") + "<h3 style='text-align:center;text-transform: uppercase;'>" + jquery_min_p("#lblRestroName").text() + "</h3>", Query += "<div style='width:108px;height:55px;overflow:hidden;position: absolute;top: -19px;'><span><img id='prntimgPreview'  style='width: 74%;'/></span></div>", Query += "</div>"; for (t = 0; t < i; t++) Query = Query + "<h5 style='background-color: #607377;padding: 6px 0px 6px 4px;color:#ffffff;margin-bottom: 5px;margin-top: 0px;font-family: arial, sans-serif;'>" + e[t].name + "</h5>", PrintBindLevel1(e[t].RestroMenuLevel1Id); jquery_min_p("#preloader").css("display", "none"), jquery_min_p("#Overlay_Load").css("visibility", "hidden") }, beforesend: function () { jquery_min_p("#preloader").css("display", "block"), jquery_min_p("#Overlay_Load").css("visibility", "visible") } }), Query += "</div>", jquery_min_p("#divprntmenucreation").append(Query), BindMenu(), defaultMenu() } function PrintBindLevel1(e) { jquery_min_p("#itemlevel1table_" + e + "tbody").empty(); var t = jquery_min_p("#ddlselectmenu").val(); restroid = jquery_min_p("#lblrestroid").text(), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/BindItemLevel1", data: "{'restroid':'" + restroid + "','restromenuid':'" + t + "','RestroMenuLevel1Id':'" + e + "'}", dataType: "json", async: !1, success: function (i) { var l = 0, n = i.length; if (n > 0) { Query = (Query = Query + "<div style='margin-bottom: 1%;' id='level1item_" + e + "'>") + "<table style='width: 100%;border: 1px solid #cdcdcd;font-family: arial, sans-serif; id='itemlevel1table_" + e + "'>", Query += " <thead style='background: #90aaad;'>", Query += "<tr style='text-align: left;font-size: 12px;'>", Query += "<th style='padding: 5px 0px 5px 5px;'>Item Name</th>", Query += "<th style='padding: 5px 0px 5px 5px;'>Item Price</th>", Query += "</tr>", Query += "</thead>", Query += " <tbody>"; var r = 0; for (l = 0; l < n; l++) r % 2 == 0 ? (Query = (Query = (Query += "<tr style='font-size: 12px;'>") + "<td style='padding: 5px 0px 5px 5px;'>" + i[l].itemname + "</td>") + "<td style='padding: 5px 0px 5px 5px;'>" + i[l].itemPrice + "</td>", Query += "</tr>", r++) : (Query = (Query = (Query += "<tr style='background-color: #d7dfe0;font-size: 12px;'>") + "<td style='padding: 5px 0px 5px 5px;'>" + i[l].itemname + "</td>") + "<td style='padding: 5px 0px 5px 5px;'>" + i[l].itemPrice + "</td>", Query += "</tr>", r++); Query += "</tbody> </table>  ", Query += "</div>" } jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/BindLevel2", data: "{'restroid':'" + restroid + "','restromenuid':'" + t + "','RestroMenuLevel1Id':'" + e + "'}", dataType: "json", async: !1, success: function (e) { if (e.length > 0) for (var t = e.length, i = 0; i < t; i++) Query = (Query += " <div style='width: 99%;margin-left: 1%;'>") + "<h5 style='background-color: #71a4a4;padding: 6px 0px 6px 4px;color:#ffffff;margin-bottom: 5px;margin-top: 0px;font-family: arial, sans-serif;'>" + e[i].name + "</h5>", PrintBindItemLevel2(e[i].RestroMenuLevel2Id) } }) } }) } function PrintBindItemLevel2(e) { jquery_min_p("#itemlevel2table_" + e + "tbody").empty(); var t = jquery_min_p("#ddlselectmenu").val(); restroid = jquery_min_p("#lblrestroid").text(), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/BindItemLevel2", data: "{'restroid':'" + restroid + "','restromenuid':'" + t + "','RestroMenuLevel2Id':'" + e + "'}", dataType: "json", async: !1, success: function (i) { var l = 0, n = i.length; if (i.length > 0) { Query = (Query = Query + " <div style='width: 99%;margin-left: 1%;margin-bottom: 1%;'  id='level2item_" + e + "'>") + "<table style='width: 100%;border: 1px solid #cdcdcd;font-family: arial, sans-serif;' id='itemlevel2table_" + e + "'>", Query += " <thead style='background: #90aaad;'>", Query += " <tr style='text-align: left;font-size: 12px;'>", Query += " <th style='padding: 5px 0px 5px 5px;'>Item Name</th>", Query += "<th style='padding: 5px 0px 5px 5px;'>Item Price</th>", Query += " </tr>", Query += "</thead>", Query += "<tbody>"; var r = 0; for (l = 0; l < n; l++) r % 2 == 0 ? (Query = (Query = (Query += "<tr style='font-size: 12px;'>") + "<td style='padding: 5px 0px 5px 5px;'>" + i[l].itemname + "</td>") + "<td style='padding: 5px 0px 5px 5px;'>" + i[l].itemPrice + "</td>", Query += "</tr>", r++) : (Query = (Query = (Query += "<tr style='background-color: #d7dfe0;font-size: 12px;'>") + "<td style='padding: 5px 0px 5px 5px;'>" + i[l].itemname + "</td>") + "<td style='padding: 5px 0px 5px 5px;'>" + i[l].itemPrice + "</td>", Query += "</tr>", r++); Query += "</tbody></table>", Query += "</div></div>" } jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/BindLevel3", data: "{'restroid':'" + restroid + "','restromenuid':'" + t + "','RestroMenuLevel2Id':'" + e + "'}", dataType: "json", async: !1, success: function (e) { var t = e.length; if (e.length > 0) for (var i = 0; i < t; i++) Query = (Query += " <div style='width: 98%;margin-left: 2%;'>") + "<h5 style='background-color: #8fa0a2;padding: 6px 0px 6px 4px;color:#ffffff;margin-bottom: 5px;margin-top: 0px;font-family: arial, sans-serif;'>" + e[i].name + "</h5>", PrintBindItemLevel3(e[i].RestroMenuLevel3Id) } }) } }) } function PrintBindItemLevel3(e) { jquery_min_p("#itemlevel3table_" + e + "tbody").empty(); var t = jquery_min_p("#ddlselectmenu").val(); restroid = jquery_min_p("#lblrestroid").text(), jquery_min_p.ajax({ type: "POST", contentType: "application/json; charset=utf-8", url: "/MenuCreation/BindItemLevel3", data: "{'restroid':'" + restroid + "','restromenuid':'" + t + "','RestroMenuLevel3Id':'" + e + "'}", dataType: "json", async: !1, success: function (t) { var i = 0, l = t.length; if (t.length > 0) { Query = (Query = Query + " <div style='width: 98%;margin-left: 2%;margin-bottom: 1%;' id='level3item_" + e + "'>") + "  <table style='width: 100%;border: 1px solid #cdcdcd;font-family: arial, sans-serif;' id='itemlevel3table_" + e + "'>", Query += "   <thead style='background: #90aaad;'>", Query += "      <tr style='text-align: left;font-size: 12px;'>", Query += "        <th style='padding: 5px 0px 5px 5px;'>Item Name</th>", Query += "         <th style='padding: 5px 0px 5px 5px;'>Item Price</th>", Query += "  </tr>", Query += "    </thead>", Query += "  <tbody>"; var n = 0; for (i = 0; i < l; i++) n % 2 == 0 ? (Query = (Query = (Query += "<tr style='font-size: 12px;'>") + "<td style='padding: 5px 0px 5px 5px;'>" + t[i].itemname + "</td>") + "<td style='padding: 5px 0px 5px 5px;'>" + t[i].itemPrice + "</td>", Query += "</tr>", n++) : (Query = (Query = (Query += "<tr style='background-color: #d7dfe0;font-size: 12px;'>") + "<td style='padding: 5px 0px 5px 5px;'>" + t[i].itemname + "</td>") + "<td style='padding: 5px 0px 5px 5px;'>" + t[i].itemPrice + "</td>", Query += "</tr>", n++); Query += "</tbody></table>", Query += "</div></div>" } } }) } jquery_min_p(document).ready(function () { restroid = jquery_min_p("#lblrestroid").text(), jquery_min_p("#btnsaveitem").css("display", "none"), jquery_min_p("#divitemgrid").css("display", "block"), BindMenu(), defaultMenu(), jquery_min_p("#btnprintmenu").click(function () { PrintBindLevel(), PrintBindRestroImage(), printResult() }), jquery_min_p("#btnaddmenu").click(function () { "" == jquery_min_p("#txtmenuname").val() ? jquery_min_p("#txtmenuname").addClass("validate") : SaveMenu() }), jquery_min_p("#chkall").click(function () { 1 == jquery_min_p("#chkall").prop("checked") ? jquery_min_p(".chk").prop("checked", !0) : jquery_min_p(".chk").prop("checked", !1) }), jquery_min_p("#btnaddlevel").click(function () { jquery_min_p("#btnsavelevel").text("Save"), jquery_min_p("#haddlevel").text("Add Level"), jquery_min_p("#txtlevel").val(""), bootstrap_min_p("#addlevel").modal("show") }), jquery_min_p("#btnsaveitem").click(function () { Insertitemlevel3() }), jquery_min_p("#btnedititem").click(function () { bootstrap_min_p("#editItem").modal("hide"), jquery_min_p("#hconfirm").text("Are you sure to update Item Price?"), bootstrap_min_p("#confirmationPopup").modal("show") }), jquery_min_p("#yesBtn").click(function () { updateitemprice() }), jquery_min_p("#noBtn").click(function () { bootstrap_min_p("#confirmationPopup").modal("hide") }), jquery_min_p("#delsucess").click(function () { 1 == levelid ? deletelevel() : 2 == levelid ? deletesublevel1() : 3 == levelid ? deletesublevel2() : 4 == levelid ? deleteitem() : Delete(), bootstrap_min_p("#deletePopup1").modal("hide") }), jquery_min_p("#delcancel").click(function () { bootstrap_min_p("#deletePopup1").modal("hide") }), jquery_min_p("#btnsaveclose").click(function () { bootstrap_min_p("#savePopup").modal("hide"), window.location.reload(!0) }), jquery_min_p("#btnsavelevel").click(function () { bootstrap_min_p("#addlevel").modal("hide"), "" == jquery_min_p("#txtlevel").val() ? jquery_min_p("#txtlevel").addClass("validate") : Savelevel1() }), jquery_min_p("#btnsublevel").click(function () { bootstrap_min_p("#sublevel").modal("hide"), "" == jquery_min_p("#txtsublevel").val() ? jquery_min_p("#txtsublevel").addClass("validate") : Savelevel2() }), jquery_min_p("#btncrosscloase").click(function () { bootstrap_min_p("#savePopup").modal("hide"), window.location.reload(!0) }), jquery_min_p("#aedit").click(function () { EditMenu() }), jquery_min_p("#btndone").click(function () { SaveMenu() }) });